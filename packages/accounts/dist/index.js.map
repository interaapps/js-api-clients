{"version":3,"file":"index.js","sources":["../index.ts"],"sourcesContent":["import { BaseClient } from '@interaapps/base-client';\nexport * from './exceptions'\nimport * as exceptions from \"./exceptions\";\n\nexport * from './types/requests'\nexport * from './types/requests'\nexport * from './oauth2Client'\n\nimport {\n    LoginRequest,\n    RegisterRequest,\n    EditUserRequest,\n    CreateContactRequest,\n    CreatePasswordResetRequest,\n    ResetPasswordRequest,\n    EditOAuth2AppRequest,\n    ProjectAppRequest,\n    CreateProjectRequest,\n    EditProjectRequest\n} from './types/requests';\n\nimport {AuthKey, CreateProjectApp, List, OAuth2App, OAuth2AuthorizedApps, Project, User} from \"./types/responses\";\n\nexport class AccountsClient extends BaseClient {\n    constructor(apiToken: string|undefined = undefined, baseURL: string = 'https://accounts.interaapps.de') {\n        super(`${baseURL}/api/v2`);\n        // @ts-ignore\n        this.registeredExceptions = exceptions\n        if (apiToken) this.setBearerToken(apiToken)\n    }\n\n    setApiToken(token: string) {\n        this.setBearerToken(token)\n        return this;\n    }\n\n    /**\n     * Do not use this in the backend. This will fail.\n     */\n    async login(request: LoginRequest): Promise<AuthKey> {\n        return (await this.post('/auth/login', request)).data as AuthKey;\n    }\n\n    /**\n     * Do not use this in the backend. This will fail.\n     */\n    async register(request: RegisterRequest): Promise<AuthKey> {\n        return (await this.post('/auth/register', request)).data as AuthKey;\n    }\n\n    async resetPassword(request: CreatePasswordResetRequest) {\n        return (await this.post('/auth/reset_password', request)).data;\n    }\n\n    async confirmResetPassword(key: string, request: ResetPasswordRequest) {\n        return (await this.post(`/auth/reset_password/${key}`, request)).data;\n    }\n\n    async getCurrentUser() {\n        return (await this.get('/user')).data as User;\n    }\n\n    async editUser(request: EditUserRequest) {\n        return (await this.put('/user', request)).data;\n    }\n\n    async getContacts() {\n        return (await this.get('/contacts')).data as List<User>;\n    }\n\n    async createContact(request: CreateContactRequest) {\n        return (await this.post('/contacts', request)).data;\n    }\n\n    async acceptContactRequest(id: number){\n        await this.get(`/contacts/requests/${id}/accept`);\n    }\n\n    async removeContact(id: number) {\n        await this.delete(`/contacts/${id}`);\n    }\n\n    async getAuthKeys() {\n        return (await this.get('/authkeys')).data as List<AuthKey>;\n    }\n\n    async deleteAuthKey(key: string) {\n        await this.delete(`/authkeys/${key}`);\n    }\n\n    async createProject(request: CreateProjectRequest) {\n        return (await this.post('/projects', request)).data as Project;\n    }\n\n    async getProjects() {\n        return (await this.get('/projects')).data as List<Project>;\n    }\n\n    async getProject(id: number){\n        return (await this.get(`/projects/${id}`)).data as Project;\n    }\n\n    async editProject(id: number, request: EditProjectRequest) {\n        await this.put(`/projects/${id}`, request);\n    }\n\n    async deleteProject(id: number) {\n        await this.delete(`/projects/${id}`);\n    }\n\n    // Project Apps\n    async createProjectApp(projectId: number, request: ProjectAppRequest) {\n        await this.post(`/projects/${projectId}/apps`, request);\n    }\n\n    async getProjectApps(projectId: number) {\n        return (await this.get(`/projects/${projectId}/apps`)).data as List<CreateProjectApp>;\n    }\n\n    // OAuth2 Apps\n    async getOAuth2App(id: string) {\n        return (await this.get(`/projects/apps/oauth2/${id}`)).data as OAuth2App;\n    }\n\n    async editOAuth2App(id: string, request: EditOAuth2AppRequest) {\n        await this.put(`/projects/apps/oauth2/${id}`, request);\n    }\n\n    async deleteOAuth2App(id: string) {\n        await this.delete(`/projects/apps/oauth2/${id}`);\n    }\n\n    // OAuth2 Authorized Apps\n    async getAuthorizedApps() {\n        return (await this.get('/authorization/oauth2/authorized_apps')).data as List<OAuth2AuthorizedApps>;\n    }\n\n    async getKeyFor(id: 'pastefy' | string) {\n        return (await this.get(`/oauth2/external/${id}`, {\n            headers: {\n                Accept: 'text/plain'\n            }\n        })).data.res\n    }\n}"],"names":["BaseClient"],"mappings":"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"}